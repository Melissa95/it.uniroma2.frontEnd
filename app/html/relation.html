<ng-include src="'html/sidenav.html'"></ng-include>

<div ng-controller="ctrlRelation">
    <form name="formRel">
<div layout="column" layout-align="center center" style="padding:40px" ng-cloak>


    <table class="table table-dark">
        <thead>
        <tr>
            <th scope="col">Identification</th>
            <th scope="col">Title</th>
            <th scope="col">Define Relation</th>
            <th scope="col">Choose ticket</th>
            <th scope="col"> </th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat = "t in ticketsNoRel" >
            <td> {{t.id}}</td>
            <td> {{t.title}} </td>
            <td>

                <form  name="myForm">
                <select  style="color: white" class="btn btn-dark" ng-model ="relation" ng-click="valueRelation(relation)">
                    <option  ng-repeat="p in rel">{{p}}</option>
                    <option ng-repeat="s in allRelation">{{s.name}}</option>
                </select>
                </form>
            </td>
            <td>


                <select ng-show="relation == 'equality'" class="btn btn-dark" ng-model="ticketequ" ng-click="idTicket(ticketequ)">
                <option   ng-repeat="t in ticketsforEqu"  ng-value="t.id">{{t.id}} - {{t.title}}</option>
                </select>

                <select ng-show="relation == 'dependency'" class="btn btn-dark" ng-model="ticketdep" ng-click="idTicket(ticketdep)">
                    <option   ng-repeat="y in ticketsforDep"  ng-value="y.id">{{y.id}} - {{y.title}}</option>
                </select>

                <select ng-show="relation == 'regression'" class="btn btn-dark" ng-model="ticketreg" ng-click="idTicket(ticketreg)">
                    <option   ng-repeat="t in ticketsforReg" ng-value="t.id">{{t.id}} - {{t.title}}</option>
                </select>

                <select ng-show="relation != null && relation != 'equality' && relation != 'regression' && relation !== 'dependency' " class="btn btn-dark" ng-model="ticketequ" ng-click="idTicket(ticketequ)">
                    <option   ng-repeat="t in allTick" ng-value="t.id">{{t.id}} - {{t.title}}</option>
                </select>

            </td>
           <td><button ng-disabled="formRel.$invalid" ng-click="createRel($index)" type="button" class="btn btn-dark" style="text-align: center">Create Relation</button></td>

        </tr>
        <tr ng-repeat = "t in ticketsDep">
            <td> {{t.id}}


            <td> {{t.title}} </td>

            <td>

                dependency
            </td>
            <td>


                <select  class="btn btn-dark" ng-model="ticketdep" ng-click="idTicket(ticketdep)">
                    <option   ng-repeat="t in ticketsforDep" ng-value="t.id">{{t.id}} - {{t.title}}</option>
                </select>


            </td>
            <td><button ng-disabled="formRel.$invalid" ng-click="createRelDep($index)" type="button" class="btn btn-dark" style="text-align: center">Create Relation</button></td>

        </tr>

        </tr>

        </tbody>
    </table>

</div>
    </form>
</div>
